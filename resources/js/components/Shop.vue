<template>
    <div>
        {{ gemitems }}
        {{ golditems }}
        <shop-before></shop-before>
        <div class="breakout-body">
            <div class="col-12 pt-4">
                <div class="panneau-ligne-1 pb-3" style="z-index: 2;">
                    <hr>
                    <div class="d-flex justify-content-center">
                        <div><h2>Nos coffres au trésor</h2></div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-12">
                        <div class="boutique-fond-1">
                            <div class="row">
                            <div class="col-md-3 col-6">
                                <div class="cadre-boutique-coffres mt-3">
                                    <div class="cadre-boutique-coffres-header">
                                        <h6 class="text-center">Coffre surpise</h6>
                                    </div>
                                    <div class="cadre-boutique-coffres-body">
                                        <img src="img/Banque_graphique/Objets/BreakOut_Coffre_Surprise.png">
                                    </div>
                                    <div class="cadre-boutique-coffres-footer">
                                        <div><button>Acheter</button></div>
                                        <div>
                                            <div class="div-price">
                                                700
                                            </div>
                                            <div class="div-gold"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3 col-6">
                                <div class="cadre-boutique-coffres mt-3">
                                    <img src="img/Banque_graphique/Boutique/panneau_prix_or_1000.png">
                                    <div class="cadre-boutique-coffres-header">
                                        <h6 class="text-left">1000 Pièces d'or</h6>
                                    </div>
                                    <div class="cadre-boutique-coffres-body">
                                        <img src="img/Banque_graphique/Objets/BreakOut_Coffre_Surprise.png">
                                    </div>
                                    <div class="cadre-boutique-coffres-footer">
                                        <div><button>Acheter</button></div>
                                        <div style="background: #0064B4;">
                                            <div class="div-price" style="color: white;">
                                                2€50
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3 col-6">
                                <div class="cadre-boutique-coffres mt-3">
                                    <img src="img/Banque_graphique/Boutique/panneau_prix_or_5000.png">
                                    <div class="cadre-boutique-coffres-header">
                                        <h6 class="text-left">5000 Pièces d'or</h6>
                                    </div>
                                    <div class="cadre-boutique-coffres-body">
                                        <img src="img/Banque_graphique/Objets/BreakOut_Coffre_Surprise.png">
                                    </div>
                                    <div class="cadre-boutique-coffres-footer">
                                        <div><button>Acheter</button></div>
                                        <div style="background: #0064B4;">
                                            <div class="div-price" style="color: white;">
                                                10€
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3 col-6">
                                <div class="cadre-boutique-coffres mt-3">
                                    <img src="img/Banque_graphique/Boutique/panneau_prix_or_10000.png">
                                    <div class="cadre-boutique-coffres-header">
                                        <h6 class="text-left">10 000 Pièces d'or</h6>
                                    </div>
                                    <div class="cadre-boutique-coffres-body">
                                        <img src="img/Banque_graphique/Objets/BreakOut_Coffre_Surprise.png">
                                    </div>
                                    <div class="cadre-boutique-coffres-footer">
                                        <div><button>Acheter</button></div>
                                        <div style="background: #0064B4;">
                                            <div class="div-price" style="color: white;">
                                                16€
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-12 pt-4">
                <div class="row">
                    <div class="col-12 col-md-6 pb-3">
                        <div class="boutique-fond-2">
                            <div class="panneau-ligne-1 pb-3">
                                <hr>
                                <div class="d-flex justify-content-center">
                                    <div><h2>Salles à l'unité</h2></div>
                                </div>
                            </div>
                            <div class="shop-sous-panneau">
                                Découvrez nos derniers scénarios disponibles.
                            </div>
                            <div class="row p-1">
                                <!-- Salle 1 -->
                                <div class="col-12 col-md-6">
                                    <div class="shop-cadre-salle-unite mt-3">
                                        <div class="shop-cadre-salle-unite-header">
                                            <div class="d-flex w-100">
                                                <div class="mr-auto" style="color: white;">
                                                    <i class="fas fa-user"></i> 3 <i class="fas fa-mobile-alt"></i> <i class="fas fa-desktop"></i>
                                                </div>
                                                <div class="d-flex">
                                                    <div class="div-price">
                                                        700
                                                    </div>
                                                    <div class="div-gold"></div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="shop-cadre-salle-unite-body">
                                            <div class="w-100 h-100 position-relative">
                                               <div style="background-image: url('img/illustrations_salles/exemple1.jpg')"></div>
                                               <div>
                                                   <div>
                                                       <div class="m-auto">Le tombeau<br>d'Agamemnon</div>
                                                   </div>
                                                   <div>
                                                       <p>
                                                           Charles le plus beau. Aliquid, animi aspernatur dolore enim est illo, laborum nisi quas repellat sequi vel vitae? Eligendi enim est eveniet illum nulla qui rem?
                                                       </p>
                                                   </div>
                                               </div>
                                            </div>
                                        </div>
                                        <div class="shop-cadre-salle-unite-footer">
                                            <button>Sélectionner</button>
                                        </div>
                                    </div>
                                </div>

                                <!-- Salle 2 -->
                                <div class="col-12 col-md-6">
                                    <div class="shop-cadre-salle-unite mt-3">
                                        <div class="shop-cadre-salle-unite-header">
                                            <div class="d-flex w-100">
                                                <div class="mr-auto" style="color: white;">
                                                    <i class="fas fa-user"></i> 2 <i class="fas fa-desktop"></i>
                                                </div>
                                                <div class="d-flex">
                                                    <div class="div-price">
                                                        1200
                                                    </div>
                                                    <div class="div-gold"></div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="shop-cadre-salle-unite-body">
                                            <div class="w-100 h-100 position-relative">
                                                <div style="background-image: url('img/illustrations_salles/exemple2.png')"></div>
                                                <div>
                                                    <div>
                                                        <div class="m-auto">La forêt<br>d'Esrael</div>
                                                    </div>
                                                    <div>
                                                        <p>
                                                            Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid, animi aspernatur dolore enim est illo, laborum nisi quas repellat sequi vel vitae? Eligendi enim est eveniet illum nulla qui rem?
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="shop-cadre-salle-unite-footer">
                                            <button>Sélectionner</button>
                                        </div>
                                    </div>
                                </div>

                                <!-- Salle 3 -->
                                <div class="col-12 col-md-6">
                                    <div class="shop-cadre-salle-unite mt-3">
                                        <div class="shop-cadre-salle-unite-header">
                                            <div class="d-flex w-100">
                                                <div class="mr-auto" style="color: white;">
                                                    <i class="fas fa-user"></i> 1 <i class="fas fa-desktop"></i>
                                                </div>
                                                <div class="d-flex">
                                                    <div class="div-price">
                                                        600
                                                    </div>
                                                    <div class="div-gold"></div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="shop-cadre-salle-unite-body">
                                            <div class="w-100 h-100 position-relative">
                                                <div style="background-image: url('img/illustrations_salles/exemple3.png')"></div>
                                                <div>
                                                    <div>
                                                        <div class="m-auto">La prison de<br>Pandragon</div>
                                                    </div>
                                                    <div>
                                                        <p>
                                                            Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid, animi aspernatur dolore enim est illo, laborum nisi quas repellat sequi vel vitae? Eligendi enim est eveniet illum nulla qui rem?
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="shop-cadre-salle-unite-footer">
                                            <button>Sélectionner</button>
                                        </div>
                                    </div>
                                </div>

                                <!-- Salle 4 -->
                                <div class="col-12 col-md-6">
                                    <div class="shop-cadre-salle-unite mt-3">
                                        <div class="shop-cadre-salle-unite-header">
                                            <div class="d-flex w-100">
                                                <div class="mr-auto" style="color: white;">
                                                    <i class="fas fa-user"></i> 2 <i class="fas fa-desktop"></i>
                                                </div>
                                                <div class="d-flex">
                                                    <div class="div-price">
                                                        1700
                                                    </div>
                                                    <div class="div-gold"></div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="shop-cadre-salle-unite-body">
                                            <div class="w-100 h-100 position-relative">
                                                <div style="background-image: url('img/illustrations_salles/exemple4.jpg')"></div>
                                                <div>
                                                    <div>
                                                        <div class="m-auto">Le désert<br>des dunes</div>
                                                    </div>
                                                    <div>
                                                        <p>
                                                            Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid, animi aspernatur dolore enim est illo, laborum nisi quas repellat sequi vel vitae? Eligendi enim est eveniet illum nulla qui rem?
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="shop-cadre-salle-unite-footer">
                                            <button>Sélectionner</button>
                                        </div>
                                    </div>
                                </div>

                            </div>
                            <div class="row">
                                <div class="col-12 mt-5 mb-5 text-center">
                                    <a class="lien-simple" href="#">Voir toutes les salles</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-md-6">
                        <div class="boutique-fond-2">
                            <div class="panneau-ligne-1 pb-3">
                                <hr>
                                <div class="d-flex justify-content-center">
                                    <div><h2>Objets hebdomadaires</h2></div>
                                </div>
                            </div>
                            <div class="shop-sous-panneau">
                                Chaque semaine, trois nouveaux objets aléatoires sont disponibles en vente à la boutique.<br><strong class="josephin-bold">(Disponible pendant encore <span style="color: #F9BA48;">03:11:43:27</span>)</strong>
                            </div>
                            <div class="row p-1">
                                <!-- Objets -->
                                <div class="col-12 col-md-4" v-for="golditem in itemsgold" :id="'item-'+golditem.id">
                                    <div class="shop-cadre-items mt-3">
                                        <div class="shop-cadre-items-header">
                                            {{ golditem.name }}
                                        </div>
                                        <div class="shop-cadre-items-body">
                                            <div>
                                                <img :src="golditem.img">
                                            </div>
                                            <div>
                                                <p>{{ golditem.description }}</p>
                                            </div>
                                        </div>
                                        <div class="shop-cadre-items-footer">
                                            <div>
                                                <button @click="buyitem(golditem.id)">Acheter</button>
                                            </div>
                                            <div>
                                                <div class="div-price">
                                                    {{ golditem.price }}
                                                </div>
                                                <div class="div-gold"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                            <div class="panneau-ligne-1 pb-3">
                                <hr>
                                <div class="d-flex justify-content-center">
                                    <div><h2>Objets Spéciaux</h2></div>
                                </div>
                            </div>
                            <div class="row p-1">
                                <div class="col-12 col-md-4" v-for="gemitem in itemsgem" :id="'item-'+gemitem.id" >
                                    <div class="shop-cadre-items-gem mt-3">
                                        <div class="shop-cadre-items-gem-header">
                                            {{ gemitem.name }}
                                        </div>
                                        <div class="shop-cadre-items-gem-body">
                                            <img :src="gemitem.img">
                                        </div>
                                        <div class="shop-cadre-items-gem-footer">
                                            <div @click="buyitem(gemitem.id)">Acheter</div>
                                            <div>
                                                <div>{{ gemitem.price }}</div>
                                                <div class="div-gem"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12 col-md-4" v-for="voiditem in (3 - itemsgem.length)">
                                    <div class="shop-cadre-items-gem-void mt-3">
                                    </div>
                                </div>
                            </div>
                            <div class="login-modal-error" v-if="gemerrors.length" style="color: darkred;">
                                <p class="h-100 text-center">
                                    <span v-for="error in gemerrors">
                                        {{ error }}<br>
                                    </span>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <global-footer></global-footer>
        </div>
    </div>
</template>
<script>
import ShopBefore from "./before/ShopBefore";
import GlobalFooter from "./layout/Footer";
export default {
    name: "Shop",
    props: ['app'],
    components: {ShopBefore, GlobalFooter},
    data() {
        return {
            itemsgold: [],
            itemsgem: [],
            golderrors: [],
            gemerrors: []
        }
    },
    mounted() {
        document.title="Boutique";
    },
    computed : {
        golditems: function () {
            this.app.req.post("bo_shop/loadallgolditem").then(response => {
                this.itemsgold = response.data;
                //console.log(response.data);
            });
        },
        gemitems: function () {
            this.app.req.post("bo_shop/loadallgemitem").then(response => {
                this.itemsgem = response.data;
                //console.log(response.data);
            });
        },
    },
    methods:
    {
        buyitem(id) {
            const data = {
                id: id,
            }
            this.app.req.post("bo_shop/buyitem", data).then(response => {
                console.log(response.data);
            }).catch(error => {
                this.gemerrors.push(error.response.data.error);
            });
        }
    },
}
</script>
<style>

</style>
